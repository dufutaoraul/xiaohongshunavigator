-- ğŸ§¹ æ¸…ç†AXCF202505å¼€å¤´å­¦å‘˜çš„æµ‹è¯•æ‰“å¡å®‰æ’æ•°æ®
-- ç”¨é€”ï¼šåˆ é™¤æµ‹è¯•è®¾ç½®çš„æ‰“å¡å®‰æ’ï¼Œè®©å­¦å‘˜é‡æ–°è‡ªä¸»è®¾ç½®
-- ä¿æŠ¤ï¼šåªåˆ é™¤æ‰“å¡å®‰æ’ï¼Œä¸åˆ é™¤å­¦å‘˜æœ¬èº«è´¦æˆ·

-- ====================================================
-- ç¬¬ä¸€æ­¥ï¼šæŸ¥çœ‹è¦åˆ é™¤çš„æ•°æ®ï¼ˆç¡®è®¤èŒƒå›´ï¼‰
-- ====================================================

-- æŸ¥çœ‹æ‰€æœ‰AXCF202505å¼€å¤´çš„æ‰“å¡å®‰æ’
SELECT
    student_id,
    start_date,
    end_date,
    is_active,
    created_at,
    created_by
FROM checkin_schedules
WHERE student_id LIKE 'AXCF202505%'
ORDER BY student_id, created_at;

-- ç»Ÿè®¡æ•°é‡
SELECT
    'AXCF202505æ‰“å¡å®‰æ’æ€»æ•°' as description,
    COUNT(*) as count
FROM checkin_schedules
WHERE student_id LIKE 'AXCF202505%';

-- ====================================================
-- ç¬¬äºŒæ­¥ï¼šæ£€æŸ¥ç›¸å…³çš„æ‰“å¡è®°å½•
-- ====================================================

-- æŸ¥çœ‹è¿™äº›å­¦å‘˜æ˜¯å¦æœ‰æ‰“å¡è®°å½•
SELECT
    student_id,
    COUNT(*) as record_count,
    MIN(checkin_date) as first_checkin,
    MAX(checkin_date) as last_checkin
FROM checkin_records
WHERE student_id LIKE 'AXCF202505%'
GROUP BY student_id
ORDER BY student_id;

-- ç»Ÿè®¡AXCF202505çš„æ‰“å¡è®°å½•æ€»æ•°
SELECT
    'AXCF202505æ‰“å¡è®°å½•æ€»æ•°' as description,
    COUNT(*) as count
FROM checkin_records
WHERE student_id LIKE 'AXCF202505%';

-- ====================================================
-- ç¬¬ä¸‰æ­¥ï¼šç¡®è®¤å­¦å‘˜è´¦æˆ·å­˜åœ¨ä¸”è§’è‰²æ­£ç¡®
-- ====================================================

-- ç¡®è®¤è¿™äº›å­¦å‘˜çš„è´¦æˆ·ä¿¡æ¯
SELECT
    student_id,
    name,
    real_name,
    role,
    created_at
FROM users
WHERE student_id LIKE 'AXCF202505%'
ORDER BY student_id;

-- ====================================================
-- ç¬¬å››æ­¥ï¼šæ‰§è¡Œæ¸…ç†æ“ä½œï¼ˆè¯·åˆ†æ­¥æ‰§è¡Œï¼‰
-- ====================================================

-- ğŸš¨ é‡è¦æé†’ï¼š
-- 1. è¿™å°†åˆ é™¤AXCF202505å­¦å‘˜çš„æ‰€æœ‰æ‰“å¡å®‰æ’
-- 2. è¿™å°†åˆ é™¤AXCF202505å­¦å‘˜çš„æ‰€æœ‰æ‰“å¡è®°å½•
-- 3. ä¸ä¼šåˆ é™¤å­¦å‘˜è´¦æˆ·æœ¬èº«
-- 4. åˆ é™¤åå­¦å‘˜å¯ä»¥é‡æ–°è‡ªä¸»è®¾ç½®æ‰“å¡æ—¶é—´

-- æ­¥éª¤4.1ï¼šåˆ é™¤æ‰“å¡è®°å½•ï¼ˆå¦‚æœéœ€è¦æ¸…ç©ºå†å²è®°å½•ï¼‰
-- å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„è¯­å¥æ¥æ‰§è¡Œåˆ é™¤
/*
DELETE FROM checkin_records
WHERE student_id LIKE 'AXCF202505%';
*/

-- æ­¥éª¤4.2ï¼šåˆ é™¤æ‰“å¡å®‰æ’ï¼ˆæ ¸å¿ƒæ“ä½œï¼‰
-- å–æ¶ˆæ³¨é‡Šä¸‹é¢çš„è¯­å¥æ¥æ‰§è¡Œåˆ é™¤
/*
DELETE FROM checkin_schedules
WHERE student_id LIKE 'AXCF202505%';
*/

-- ====================================================
-- ç¬¬äº”æ­¥ï¼šéªŒè¯æ¸…ç†ç»“æœ
-- ====================================================

-- éªŒè¯æ‰“å¡å®‰æ’å·²åˆ é™¤
SELECT
    'AXCF202505å‰©ä½™æ‰“å¡å®‰æ’' as description,
    COUNT(*) as count
FROM checkin_schedules
WHERE student_id LIKE 'AXCF202505%';

-- éªŒè¯æ‰“å¡è®°å½•å·²åˆ é™¤ï¼ˆå¦‚æœé€‰æ‹©åˆ é™¤çš„è¯ï¼‰
SELECT
    'AXCF202505å‰©ä½™æ‰“å¡è®°å½•' as description,
    COUNT(*) as count
FROM checkin_records
WHERE student_id LIKE 'AXCF202505%';

-- ç¡®è®¤å­¦å‘˜è´¦æˆ·ä»ç„¶å­˜åœ¨
SELECT
    'AXCF202505å­¦å‘˜è´¦æˆ·æ•°' as description,
    COUNT(*) as count
FROM users
WHERE student_id LIKE 'AXCF202505%';

-- ====================================================
-- ç¬¬å…­æ­¥ï¼šæ£€æŸ¥è‡ªä¸»è®¾ç½®æƒé™ï¼ˆå¯é€‰ï¼‰
-- ====================================================

-- å¦‚æœæœ‰è‡ªä¸»è®¾ç½®æƒé™è¡¨ï¼Œå¯ä»¥é‡æ–°æ¿€æ´»æƒé™
-- ï¼ˆæ ¹æ®ä½ çš„é¡¹ç›®ç»“æ„è°ƒæ•´ï¼‰

-- æŸ¥çœ‹AXCF202505å­¦å‘˜æ˜¯å¦æœ‰è‡ªä¸»è®¾ç½®æƒé™
-- SELECT student_id, has_self_schedule_permission
-- FROM users
-- WHERE student_id LIKE 'AXCF202505%';

-- ====================================================
-- æ¸…ç†å®Œæˆæç¤º
-- ====================================================

SELECT
    'âœ… AXCF202505æµ‹è¯•æ•°æ®æ¸…ç†è„šæœ¬å‡†å¤‡å®Œæˆ' as status,
    'è¯·æŒ‰æ­¥éª¤æ‰§è¡Œï¼Œç¡®è®¤æ¯ä¸€æ­¥çš„ç»“æœ' as note;